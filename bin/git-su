#!/usr/bin/env ruby
$LOAD_PATH.unshift File.expand_path('../../lib', __FILE__)
require 'gitsu'

module GitSu
    user_list_file = File.expand_path("~/.gitsu")
    shell = Shell.new
    git = Git.new(shell)
    user_list = UserList.new(user_list_file)
    switcher = Switcher.new(git, user_list, STDOUT)
    git_su = Gitsu.new(switcher, STDOUT)
    begin
        git_su.go ARGV
    rescue Interrupt => interrupt
        STDERR.puts "Interrupted"
    rescue StandardError => error
        STDERR.puts error
    end
end
